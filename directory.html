<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.css">
<link href='https://fonts.googleapis.com/css?family=Roboto:400,500,700,300,100&subset=cyrillic-ext,cyrillic' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="css/styles.css">
</head>

<body>

<div class="wrapper">
<div class="wrapper__inner">
<div class="header">
  <ul class="breadcrumbs"><li><a href="#" class="link"><span class='underline'><span>Справочники</span></span></a></li></ul>
  <h1 class="title">Типы ошибок</h1>
  <button class="btn-new">+ Создать новый</button>
</div>

<div class="container container-left">
  <table id="dir-table" class="dir-table sieve">
   <thead class="dir-table__title"></thead>
   <tbody class="dir-table__body"></tbody>
 </table>
</div>

<div class="container container-right">
  <div class="filter">
    <div class="filter__title">Фильтр</div>
    <div class="filter__field"><input type="search" id="search" placeholder="Поиск"></div>
  </div>
</div>

<div class="clearfix"></div>


</div>
</div>





<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>

<script>
$(function() {
  // var directory = [];
   $.getJSON('json/getDirectory.json', function(data) {

     $.each(data.response.directory.fields, function(i, item) {
       var rowHead = "<th>" + item.name + "</th>"
        $(rowHead).appendTo("#dir-table thead");
   });

       $.each(data.response.directory.items, function(i, item) {
         var tblBody = "<tr class='row'>" +
         "<td class='err-name'>" + "<a href='#' class='link'>" + "<span class='underline'>" + "<span>" + item.name + "</span>" + "</span>" + "</a>" + "</td>" +
          "<td>" + item.weight + "</td>" +
          "<td>" + item.point + "</td>" +
          "<td>" + item.endDate + "</td>" +
          "</tr>"
            $(tblBody).appendTo("#dir-table tbody");
   });

});

});

</script>

<script>

$("#search").keyup(function() {
        var value = this.value.toLowerCase().trim();

        $("table").find("tr").each(function(index) {
            var id = $(this).find("td").text().toLowerCase().trim();
            $(this).toggle(id.indexOf(value) !== -1);
        });
    });

</script>

</body>
</html>
